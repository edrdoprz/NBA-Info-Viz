<!DOCTYPE html>
<html>
<head>
    <script type="text/javascript" src="http://mbostock.github.com/d3/d3.js"></script>
	<script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
    <div id="firstLevel"></div>
	<div id="secondLevel"></div>
	<div style="width:240px; height:25px; z-index:99;" id="teamName"></div>
	<div style="width:240px; height:25px; z-index:99;" id="playerName"></div>
    


	<script type="text/javascript">
	var height = 500;
	var width = 1000;
	var maxRadius = 50;
	var mouseX = 0;
	var mouseY = 0;
	var nextRadius = 0;
	
	
	
	$(document).mousemove(function(e){
	      mouseX = e.pageX;
		  mouseY = e.pageY;
	});
	
	
	
	var players = [{playername: "Bryant", overall: 99},
	            {playername: "Nash", overall: 75},
	            {playername: "Howard", overall: 85}];
	
	var teams = [{teamname: "Lakers", overall: 100},
	            {teamname: "Bulls", overall: 80},
	            {teamname: "Heat", overall: 95},
				{teamname: "Bobcats", overall: 5},
				{teamname: "Hornets", overall: 75}];
    
	$('#firstLevel').attr('style', 'position:absolute; width:'+width+'px; height:'+height+'px; z-index: 1;');
	

	var firstSVG = d3.select("#firstLevel")
        .append("svg")
        .attr("width", width)
        .attr("height", height);

   	var secondSVG = d3.select("#secondLevel")
        .append("svg")
        .attr("width", width)
        .attr("height", height);

    firstSVG.selectAll("circle")
		.data(teams)
		.enter()
		.append("svg:circle")
        .style("stroke", "gray")
        .style("fill", "white")
		.attr("class", "normalCircle")
        .attr("r", 	function(d, i){	return d.overall/100*maxRadius})
        .attr("cx", function(d, i){	if(i==0)
										return 50;
									else if (i==1)
										return 200;
									else if (i==2)
										return 175;
									else if (i==3)
										return 125;
									else
										return 80; })
		.attr("cy", function(d, i){	if(i==0)
										return 50;
									else if (i==1)
										return 100;
									else if (i==2)
										return 200;
									else if (i==3)
										return 150;
									else
										return 300; })
		.on("mouseover", function(d){ d3.select("#teamName")
										.style("position", "absolute")
										.style("top", mouseY-20+"px")
										.style("left", mouseX+10+"px")
										.html("Team: " + d.teamname + "</br>Overall: " + d.overall)
										.style("color", "black");})
		.on("mouseout", function(d){ d3.select("#teamName")
										.html("") })
		//.on("click", function(){ d3.select(this).style("fill", "aliceblue");
		//						$('#firstLevel').fadeOut(1000, function() {
		    						// Animation complete.
		// 						});})
        .on("dblclick", function(){d3.select(this).style("fill", "black");})
    	.on("mousedown", animateFirstStep);

	function animateFirstStep(){
	    // removing team name from screen
		d3.select("#teamName").html("");
	
		d3.select(this)
		  .attr("class", "abnormalCircle")
	      .transition()            
	        .delay(0)            
	        .duration(1000)
	        .attr("cx", width/2)
			.attr("cy", height/2)
	        .each("end", animateSecondStep);
	};

	function animateSecondStep(){
		$('.normalCircle').fadeOut(1000, function() {
			// Animation complete.
		});
	
	
		d3.select(this)
	      .transition()
	        .duration(1500)
	        .attr("r", 250)
			.each("end", animateLastStep);
	};
    
	function animateLastStep(){
		$('#secondLevel').attr('style', 'position:absolute; width:'+width+'px; height:'+height+'px; z-index: 2; display:none');
		
		
	    secondSVG.selectAll("circle")
			.data(players)
			.enter()
			.append("svg:circle")
			.style("stroke", "gray")
	        .style("fill", "white")
			.attr("cx", function(d, i){	if(i==0)
											return width*.5;
										else if (i==1)
											return width*.35;
										else
											return width*.65;})
			.attr("cy", function(d, i){	if(i==0)
											return height*.15;
										else
											return height*.75;})
			.attr("r", 	function(d, i){	return d.overall/100*maxRadius})
			.on("click", function(){ $('#firstLevel').attr('style', 'position:absolute; width:'+width+'px; height:'+height+'px; z-index: 1; visibility:hidden;'); })
			.on("dblclick", function(){ $('#firstLevel').attr('style', 'position:absolute; width:'+width+'px; height:'+height+'px; z-index: 1;'); })
			.on("mouseover", function(d){ d3.select("#playerName")
											.style("position", "absolute")
											.style("top", mouseY-20+"px")
											.style("left", mouseX+10+"px")
											.html("Player: " + d.playername + "</br>Overall: " + d.overall)
											.style("color", "black");})
			.on("mouseout", function(d){ d3.select("#playerName")
											.html("") })
			//function(){d3.select(this).style("fill", "aliceblue");})
			
			$('#secondLevel').fadeIn(1000, function() {
				// Animation complete.
			});
	};



	</script>
</body>
</html>